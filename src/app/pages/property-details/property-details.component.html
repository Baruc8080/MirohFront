<main-header></main-header>

<section class="pb-5">
  @if (property !== undefined) {
    <figure class="w-100 m-0">
      <img [src]="this.property?.hero?.uri" alt="" class="w-100 object-fit-cover rounded-2" style="height: 600px;">
    </figure>

    <div class="container">
      <div class="text-bg-light p-4 rounded-3" style="border-top-left-radius: 0px !important; border-top-right-radius: 0px !important;">
        <p class="d-flex align-items-center gap-1 mb-4">
          <span class="badge d-flex justify-content-center align-items-center lh-sm fw-normal bg-primary">Folio: {{property?.foil}}</span>
          <span class="badge d-flex justify-content-center align-items-center lh-sm fw-normal bg-success">{{property?.type}}</span>
          <span class="badge d-flex justify-content-center align-items-center lh-sm fw-normal bg-success">{{property?.status}}</span>
        </p>
        <h1 class="fs-2 section-title text-uppercase">{{property?.title}} <span class="opacity-75">, {{property?.city}}, {{property?.state}}</span></h1>
        <p class="d-flex align-items-center gap-1 text-muted opacity-75 mb-2">
          <i class="bi bi-geo-alt-fill fs-4"></i> <span>{{property?.address}}</span>
        </p>
        <p class="fs-1 fw-semibold section-title text-primary mb-2">
          <span>{{((property?.priceFrom == true) ? 'DESDE ' : '')}}</span><span>{{property?.price | currency: 'MXN'}}</span><span> {{property?.currency}} </span>
        </p>
      </div>

      <div class="mt-4">
        <div ngbAccordion>
          @if (property?.description != null && property?.description != "") {
            <div ngbAccordionItem [collapsed]="false" class="mb-2">
              <h2 ngbAccordionHeader>
                <button ngbAccordionButton class="rounded-3">Otras características, amenidades & Detalles especiales</button>
              </h2>
              <div ngbAccordionCollapse>
                <div ngbAccordionBody>
                  <ng-template>
                    <div [innerHTML]="property?.description" class="text-justify"></div>
                  </ng-template>
                </div>
              </div>
            </div>
          }
          @if ((property?.areaConstruction != null && property?.areaConstruction != "") || (property?.area != null && property?.area > 0) || (property?.room != null && property?.room > 0) || (property?.bath != null && property?.bath > 0) || (property?.floor != null && property?.floor > 0)) {
            <div ngbAccordionItem [collapsed]="false" class="mb-2">
              <h2 ngbAccordionHeader>
                <button ngbAccordionButton class="rounded-3">Características</button>
              </h2>
              <div ngbAccordionCollapse>
                <div ngbAccordionBody>
                  <ng-template>
                    <div class="d-flex flex-wrap gap-5">
                      @if (property?.areaConstruction != null && property?.areaConstruction > 0) {
                        <div class="d-flex gap-3">
                          <div class="d-flex flex-column justify-content-center">
                            <svg height="35px" width="35px" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                              <g>
                                <path d="M20.5605 6.75L23.0305 4.28C23.1002 4.21044 23.1555 4.12782 23.1932 4.03688C23.2309 3.94593 23.2503 3.84845 23.2503 3.75C23.2503 3.65155 23.2309 3.55407 23.1932 3.46312C23.1555 3.37218 23.1002 3.28956 23.0305 3.22L20.6709 0.860352"></path>
                                <path d="M3.75 23.25V5.25C3.75 4.85218 3.90804 4.47064 4.18934 4.18934C4.47064 3.90804 4.85218 3.75 5.25 3.75C5.25 3.75 16.7311 3.75 23 3.75"></path>
                                <path d="M0.75 20.561L3.22 23.03C3.28965 23.0997 3.37235 23.155 3.46338 23.1927C3.5544 23.2304 3.65197 23.2498 3.7505 23.2498C3.84903 23.2498 3.9466 23.2304 4.03762 23.1927C4.12865 23.155 4.21135 23.0997 4.281 23.03L6.75 20.56"></path>
                                <path d="M21.75 23.25C22.1478 23.25 22.5294 23.092 22.8107 22.8107C23.092 22.5294 23.25 22.1478 23.25 21.75"></path>
                                <path d="M18.75 23.25H17.25"></path>
                                <path d="M14.25 23.25H12.75"></path>
                                <path d="M9.75 23.25H8.25"></path>
                                <path d="M23.25 18.75V17.25"></path>
                                <path d="M23.25 14.25V12.75"></path>
                                <path d="M23.25 9.75V8.25"></path>
                              </g>
                            </svg>
                          </div>
                          <div class="d-flex flex-column">
                            <p class="fs-6 text-muted m-0">Construcción</p>
                            <p class="m-0">{{property?.areaConstruction}} m2</p>
                          </div>
                        </div>
                      }
                      @if (property?.area != null && property?.area > 0) {
                        <div class="d-flex gap-3">
                          <div class="d-flex flex-column justify-content-center">
                            <svg height="35px" width="35px" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                              <g>
                                <path d="M20.5605 6.75L23.0305 4.28C23.1002 4.21044 23.1555 4.12782 23.1932 4.03688C23.2309 3.94593 23.2503 3.84845 23.2503 3.75C23.2503 3.65155 23.2309 3.55407 23.1932 3.46312C23.1555 3.37218 23.1002 3.28956 23.0305 3.22L20.6709 0.860352"></path>
                                <path d="M3.75 23.25V5.25C3.75 4.85218 3.90804 4.47064 4.18934 4.18934C4.47064 3.90804 4.85218 3.75 5.25 3.75C5.25 3.75 16.7311 3.75 23 3.75"></path>
                                <path d="M0.75 20.561L3.22 23.03C3.28965 23.0997 3.37235 23.155 3.46338 23.1927C3.5544 23.2304 3.65197 23.2498 3.7505 23.2498C3.84903 23.2498 3.9466 23.2304 4.03762 23.1927C4.12865 23.155 4.21135 23.0997 4.281 23.03L6.75 20.56"></path>
                                <path d="M21.75 23.25C22.1478 23.25 22.5294 23.092 22.8107 22.8107C23.092 22.5294 23.25 22.1478 23.25 21.75"></path>
                                <path d="M18.75 23.25H17.25"></path>
                                <path d="M14.25 23.25H12.75"></path>
                                <path d="M9.75 23.25H8.25"></path>
                                <path d="M23.25 18.75V17.25"></path>
                                <path d="M23.25 14.25V12.75"></path>
                                <path d="M23.25 9.75V8.25"></path>
                              </g>
                            </svg>
                          </div>
                          <div class="d-flex flex-column">
                            <p class="fs-6 text-muted m-0">Terreno</p>
                            <p class="m-0">{{property?.area}} m2</p>
                          </div>
                        </div>
                      }
                      @if (property?.room != null && property?.room > 0) {
                        <div class="d-flex gap-4">
                          <div class="d-flex flex-column justify-content-center">
                            <svg height="35px" width="35px" fill="#000" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 482.924 482.924" xml:space="preserve">
                              <g>
                                <path d="M54.979,180.626c0-25.204,20.505-45.71,45.71-45.71h102.608c15.933,0,29.981,8.2,38.165,20.595 c8.185-12.396,22.232-20.595,38.165-20.595h102.609c25.204,0,45.709,20.506,45.709,45.71v2.105h11.443v-44.574 c0-27.66-22.503-50.163-50.163-50.163H93.698c-27.66,0-50.163,22.503-50.163,50.163v44.574h11.443V180.626z" />
                                <path d="M463.712,204.076H19.211C8.618,204.076,0,212.694,0,223.287v111.524c0,10.593,8.618,19.211,19.211,19.211h7.997 l-9.449,26.668c-1.969,5.556,0.94,11.656,6.495,13.624c1.179,0.417,2.382,0.616,3.565,0.616c4.393,0,8.509-2.734,10.06-7.112 l11.975-33.797h383.216l11.975,33.797c1.551,4.378,5.666,7.112,10.06,7.112c1.183,0,2.386-0.199,3.565-0.616 c5.556-1.969,8.464-8.069,6.495-13.624l-9.449-26.668h7.997c10.593,0,19.211-8.618,19.211-19.211V223.287 C482.924,212.694,474.306,204.076,463.712,204.076z" />
                                <path d="M279.627,156.262c-13.434,0-24.364,10.929-24.364,24.363v2.105h151.336v-2.105c0-13.434-10.929-24.363-24.363-24.363 H279.627z" />
                                <path d="M100.689,156.262c-13.435,0-24.364,10.93-24.364,24.364v2.104h151.336v-2.105c0-13.434-10.929-24.363-24.364-24.363 H100.689z" />
                              </g>
                            </svg>
                          </div>
                          <div class="d-flex flex-column">
                            <p class="fs-6 text-muted m-0">Recámaras</p>
                            <p class="m-0">{{property?.room}}</p>
                          </div>
                        </div>
                      }
                      @if (property?.bath != null && property?.bath > 0) {
                        <div class="d-flex gap-4">
                          <div class="d-flex flex-column justify-content-center">
                            <svg height="35px" width="35px" fill="#000" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 493.05 493.05" xml:space="preserve">
                              <path d="M472.958,290.74h-15.796V118.805c0-40.106-32.629-72.735-72.737-72.735c-37.391,0-68.27,28.362-72.283,64.7h-49.827 c-10.418,0-18.864,8.445-18.864,18.862c0,10.418,8.445,18.865,18.864,18.865h117.533c10.419,0,18.864-8.447,18.864-18.865 c0-10.417-8.445-18.862-18.864-18.862H332.3c3.881-25.278,25.778-44.7,52.125-44.7c29.079,0,52.737,23.657,52.737,52.735V290.74 H20.092C8.996,290.74,0,299.734,0,310.831c0,11.097,8.996,20.093,20.092,20.093h5.035c2.475,18.646,9.083,67.859,12.679,89.093 c2.486,14.683,12.072,26.964,26.964,26.964h363.511c14.892,0,24.628-12.258,26.964-26.964c3.374-21.233,10.116-70.446,12.652-89.093 h5.061c11.096,0,20.092-8.996,20.092-20.093C493.05,299.734,484.054,290.74,472.958,290.74z" />
                            </svg>
                          </div>
                          <div class="d-flex flex-column">
                            <p class="fs-6 text-muted m-0">Baños</p>
                            <p class="m-0">{{property?.bath}}</p>
                          </div>
                        </div>
                      }
                      @if (property?.floor != null && property?.floor > 0) {
                        <div class="d-flex gap-4">
                          <div class="d-flex flex-column justify-content-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="35px" height="35px" fill="#000" class="bi bi-building" viewBox="0 0 16 16">
                              <path d="M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                              <path d="M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"/>
                            </svg>
                          </div>
                          <div class="d-flex flex-column">
                            <p class="fs-6 text-muted m-0">Pisos</p>
                            <p class="m-0">{{property?.floor}}</p>
                          </div>
                        </div>
                      }
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          }
          @if ((property?.masterplan != null && property?.masterplan != "") || (property?.location != null && property?.location != "")) {
            <div ngbAccordionItem [collapsed]="false" class="mb-2">
              <h2 ngbAccordionHeader>
                <button ngbAccordionButton class="rounded-3">Master Plan</button>
              </h2>
              <div ngbAccordionCollapse>
                <div ngbAccordionBody>
                  <ng-template>
                    <div class="row">
                      @if (property?.masterplan != null && property?.masterplan != "") {
                        <div class="col-lg-6">
                          <figure class="w-100 h-100 m-0">
                            <img src="{{property?.masterplan?.uri}}" class="w-100 object-fit-cover rounded-3" height="400px">
                          </figure>
                        </div>
                      }
                      @if (property?.location != null && property?.location != "") {
                        <div class="col-lg-6">
                          <figure class="w-100 h-100 m-0">
                            <img src="{{property?.location?.uri}}" class="w-100 object-fit-cover rounded-3" height="400px">
                          </figure>
                        </div>
                      }
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          }
          @if (this.images.length > 0) {
            <div ngbAccordionItem [collapsed]="false" class="mb-2">
              <h2 ngbAccordionHeader>
                <button ngbAccordionButton class="rounded-3">Galería</button>
              </h2>
              <div ngbAccordionCollapse>
                <div ngbAccordionBody>
                  <ng-template>
                    <div class="row">
                      @for (item of this.images; track $index) {
                        <div class="col-lg-3 {{(($index > 3) ? 'mt-4' : '')}}">
                          <!-- <figure class="w-100 h-100 m-0" style="overflow: hidden;">
                            <img [src]="item.thumbnailImageSrc" alt="" class="w-100 object-fit-cover rounded-3" height="200px">
                          </figure> -->
                          <figure class="w-100 m-0 rounded-3 text-bg-light" style="overflow: hidden;">
                            <p-image [src]="item.thumbnailImageSrc" [preview]="true" class="w-100" height="200px" />
                          </figure>
                        </div>
                      }
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          }
        </div>
      </div>

      <div class="text-bg-light p-4 rounded-3">
        <div class="row">
          @if (property?.brochure != null && property?.brochure != "") {
            <div class="col-6">
              <a href="{{property?.brochure}}" download="Brochure.pdf" class="btn btn-primary rounded-3 w-100 py-3"><i class="bi bi-file-earmark-pdf lh-1 fs-4 align-bottom me-1"></i> Descargar brochure</a>
            </div>
          }
          @if (property?.website != null && property?.website != "") {
            <div class="col-6">
              <a href="{{property?.website}}" target="_blank" class="btn btn-primary rounded-3 w-100 py-3"><i class="bi bi-globe2 lh-1 fs-4 align-bottom me-1"></i> Visitar sitio web</a>
            </div>
          }
          <div class="col-4">
            <a class="btn btn-primary rounded-3 w-100 py-3" (click)="share()"><i class="bi bi-share lh-1 fs-4 align-bottom me-1"></i> ¡Compartir esta propiedad!</a>
          </div>
          @if (property?.googleMapsLink != null && property?.googleMapsLink != "") {
            <div class="col-4">
                <a href="{{property?.googleMapsLink}}" target="_blank" class="btn btn-primary rounded-3 w-100 py-3"><i class="bi bi-geo-alt-fill lh-1 fs-4 align-bottom me-1"></i> ¡Ver Mapa!</a>
            </div>
          }
          <div class="col-4">
            <a href="https://api.whatsapp.com/send?phone=520123456789&text=Hola. Me interesa recibir mas información sobre esta propiedad: {{property?.title}}" target="_blank" class="btn btn-success rounded-3 w-100 py-3"><i class="bi bi-whatsapp lh-1 fs-4 align-bottom me-1"></i> ¡Me interesa esta propiedad!</a>
          </div>
        </div>
      </div>
    </div>
  }
</section>

<main-footer></main-footer>
